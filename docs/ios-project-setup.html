<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ios-project-setup - Skills Repository</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Standard patterns for setting up iOS projects including MCP server configuration, Info.plist handling, version/commit embedding, server components with Docker workflows, code organization, simulator instructions, and checking Xcode Cloud CI status. Use when creating new iOS projects or configuring existing ones.">
</head>
<body>
    <header>
        <div class="container">
            <h1>Skills Repository</h1>
            <p class="subtitle">Development patterns and configurations organized for easy reference</p>
        </div>
    </header>

    <main class="container">
        <section>
            <a href="index.html" class="btn-back">&larr; Back to Skills</a>

            <div id="skill-content">
                <h1>ios-project-setup</h1>
                <p><strong>Description:</strong> Standard patterns for setting up iOS projects including MCP server configuration, Info.plist handling, version/commit embedding, server components with Docker workflows, code organization, simulator instructions, and checking Xcode Cloud CI status. Use when creating new iOS projects or configuring existing ones.</p>
                <p><strong>Compatibility:</strong> Requires Xcode, npx for MCP servers, and optionally Docker for server components.</p><p><strong>Author:</strong> joshspicer</p><p><strong>Version:</strong> 1.0</p>
                <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--border-color);">
                <h1>iOS Project Setup</h1>
<p>Standard patterns and configurations for iOS projects.</p>
<h2>Project Structure</h2>
<pre><code>ProjectName/
├── .vscode/
│   └── mcp.json                    # MCP server configuration
├── .github/
│   ├── instructions/               # AI context instructions
│   ├── workflows/                  # CI/CD (Docker, version bumping)
│   └── scripts/                    # Automation scripts
├── ci_scripts/                     # Xcode Cloud scripts
│   └── ci_post_clone.sh
├── ProjectName/                    # iOS-specific code
│   ├── Info.plist
│   └── GitCommit.swift             # Auto-generated commit hash
├── Shared/ (or &quot;ProjectName Shared/&quot;)  # Cross-platform code
├── ProjectName.xcodeproj/
│   └── project.pbxproj             # Version and encryption flags
├── server/                         # Optional: server component
│   ├── Dockerfile
│   └── docker-compose.yml
└── CLAUDE.md                       # AI development guidance
</code></pre>
<h2>Quick Setup Checklist</h2>
<ol>
<li><strong>MCP Servers</strong> - Configure XcodeBuildMCP and apple-developer-docs in <code>.vscode/mcp.json</code></li>
<li><strong>Encryption Flag</strong> - Set <code>INFOPLIST_KEY_ITSAppUsesNonExemptEncryption = NO</code> in project.pbxproj</li>
<li><strong>Code Organization</strong> - Split files at 400 lines max, use <code>Class+Feature.swift</code> extensions</li>
<li><strong>Shared Folder</strong> - Put cross-platform code in <code>Shared/</code> or <code>ProjectName Shared/</code></li>
<li><strong>Version Embedding</strong> - Create <code>GitCommit.swift</code> and <code>ci_scripts/ci_post_clone.sh</code></li>
<li><strong>Server (optional)</strong> - Docker setup with health checks and GitHub Actions workflows</li>
</ol>
<h2>MCP Server Configuration</h2>
<p>Create <code>.vscode/mcp.json</code>:</p>
<pre><code class="language-json">{
  &quot;servers&quot;: {
    &quot;XcodeBuildMCP&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;-y&quot;, &quot;xcodebuildmcp@latest&quot;],
      &quot;tools&quot;: [&quot;*&quot;],
      &quot;env&quot;: { &quot;SENTRY_DISABLED&quot;: &quot;true&quot; }
    },
    &quot;apple-developer-docs&quot;: {
      &quot;command&quot;: &quot;npx&quot;,
      &quot;args&quot;: [&quot;apple-developer-docs-mcp&quot;],
      &quot;tools&quot;: [&quot;*&quot;]
    }
  }
}
</code></pre>
<p>See <a href="references/mcp-servers.md">references/mcp-servers.md</a> for Claude Code permissions setup.</p>
<h2>Info.plist and Encryption</h2>
<p>Keep Info.plist minimal. Configure in build settings:</p>
<pre><code>GENERATE_INFOPLIST_FILE = YES
INFOPLIST_KEY_ITSAppUsesNonExemptEncryption = NO
MARKETING_VERSION = 1.0
CURRENT_PROJECT_VERSION = 1
</code></pre>
<p><strong>Always set <code>ITSAppUsesNonExemptEncryption = NO</code></strong> unless using non-exempt encryption. This avoids the annual export compliance questionnaire.</p>
<p>See <a href="references/info-plist.md">references/info-plist.md</a> for permission strings and background modes.</p>
<h2>Version and Commit Embedding</h2>
<p>Embed git commit hash into the app for debugging. Essential for correlating user-reported issues with specific builds.</p>
<h3>GitCommit.swift (placeholder)</h3>
<pre><code class="language-swift">import Foundation

struct GitCommit {
    static let hash: String = &quot;n/a&quot;
}
</code></pre>
<h3>ci_scripts/ci_post_clone.sh</h3>
<pre><code class="language-bash">#!/bin/sh
set -e
GIT_COMMIT=$(git rev-parse --short HEAD 2&gt;/dev/null || echo &quot;unknown&quot;)

if [ -n &quot;$CI_WORKSPACE&quot; ]; then
    OUTPUT_FILE=&quot;${CI_WORKSPACE}/ProjectName/GitCommit.swift&quot;
else
    OUTPUT_FILE=&quot;$(dirname &quot;$(pwd)&quot;)/ProjectName/GitCommit.swift&quot;
fi

cat &gt; &quot;$OUTPUT_FILE&quot; &lt;&lt; EOF
import Foundation

struct GitCommit {
    static let hash: String = &quot;$GIT_COMMIT&quot;
}
EOF
</code></pre>
<p>Display in settings alongside version and build number.</p>
<p>See <a href="references/version-embedding.md">references/version-embedding.md</a> for auto-bumping workflows.</p>
<h2>Code Organization</h2>
<h3>File Naming</h3>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ClassName.swift</code></td>
<td>Main class</td>
</tr>
<tr>
<td><code>ClassName+Feature.swift</code></td>
<td>Extension file</td>
</tr>
<tr>
<td><code>ClassNameProtocol.swift</code></td>
<td>Protocol definition</td>
</tr>
</tbody>
</table>
<h3>Size Guidelines</h3>
<ul>
<li><strong>Target</strong>: 200-300 lines</li>
<li><strong>Maximum</strong>: 400 lines</li>
<li>Split large classes with extension files</li>
<li>Put cross-platform code in <code>Shared/</code> or <code>ProjectName Shared/</code> folder</li>
</ul>
<p>See <a href="references/code-organization.md">references/code-organization.md</a> for detailed patterns.</p>
<h2>Server Components (Optional)</h2>
<p>For apps with server components, use Docker with health checks:</p>
<pre><code class="language-dockerfile">HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8080/health || exit 1

ARG GIT_COMMIT=unknown
ENV GIT_COMMIT=${GIT_COMMIT}
</code></pre>
<p>GitHub Actions workflows:<br />
- <strong>docker-publish.yml</strong> - Build and push on server changes<br />
- <strong>appstore-release.yml</strong> - Tag Docker images with App Store version</p>
<p>See <a href="references/server-docker.md">references/server-docker.md</a> for complete workflow examples.</p>
<h2>Simulator Instructions</h2>
<p><strong>Always prefer XcodeBuildMCP tools over raw xcodebuild/xcrun commands.</strong></p>
<h3>XcodeBuildMCP Tools (Preferred)</h3>
<pre><code>mcp__xcodebuild__build_run_sim        # Build and run in one step
mcp__xcodebuild__build_sim            # Build only
mcp__xcodebuild__screenshot           # Take screenshot
mcp__xcodebuild__start_sim_log_cap    # Start log capture
mcp__xcodebuild__stop_sim_log_cap     # Stop and retrieve logs
mcp__xcodebuild__list_schemes         # List available schemes
mcp__xcodebuild__discover_projs       # Find Xcode projects
</code></pre>
<p>See <a href="references/simulator.md">references/simulator.md</a> for fallback commands when MCP is unavailable.</p>
<h2>References</h2>
<ul>
<li><a href="references/mcp-servers.md">MCP Servers</a> - Detailed MCP and permissions setup</li>
<li><a href="references/info-plist.md">Info.plist</a> - Build settings and permissions</li>
<li><a href="references/version-embedding.md">Version Embedding</a> - Commit hashing and auto-bumping</li>
<li><a href="references/server-docker.md">Server &amp; Docker</a> - Docker workflows and App Store sync</li>
<li><a href="references/code-organization.md">Code Organization</a> - File splitting patterns</li>
<li><a href="references/simulator.md">Simulator</a> - Build, run, and test commands</li>
<li><a href="references/custom-libraries.md">Custom Libraries</a> - Shared packages (TODO)</li>
<li><a href="references/xcode-cloud-ci-status.md">Xcode Cloud CI Status</a> - Check build status via GitHub MCP</li>
</ul>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>
                <a href="https://github.com/joshspicer/skills" target="_blank" rel="noopener">View on GitHub</a>
                |
                <a href="llm.txt">llm.txt</a>
            </p>
        </div>
    </footer>
</body>
</html>
